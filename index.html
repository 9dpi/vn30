<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VN30 - D·ª± b√°o Ch·ª©ng kho√°n b·∫±ng Thu·∫≠t to√°n AI</title>
    <style>
        /* PH·ª§C H·ªíI GIAO DI·ªÜN N·ªÄN T·ªêI */
        body { background-color: #121212; color: #e0e0e0; font-family: sans-serif; margin: 0; padding: 0; }
        .container { max-width: 900px; margin: auto; padding: 20px; }
        h1 { text-align: center; color: #ffffff; margin-bottom: 10px; }
        
        /* Th√¥ng tin th·ªùi gian */
        .info-bar { text-align: center; margin-bottom: 20px; font-size: 0.9rem; color: #b0b0b0; }
        .info-bar b { color: #bb86fc; }

        /* B·∫£ng d·ªØ li·ªáu phong c√°ch c≈© */
        table { width: 100%; border-collapse: collapse; background: #1e1e1e; border-radius: 8px; overflow: hidden; }
        th { background: #333; color: #bb86fc; padding: 12px; text-align: center; }
        td { padding: 12px; text-align: center; border-bottom: 1px solid #333; }
        
        .text-up { color: #4caf50; font-weight: bold; }
        .text-down { color: #f44336; font-weight: bold; }
        
        /* T·ªëi ∆∞u Mobile */
        @media (max-width: 600px) {
            .hide-mobile { display: none; }
            td, th { padding: 8px 4px; font-size: 0.8rem; }
            h1 { font-size: 1.2rem; }
        }

        #btn-expand {
            display: block; width: 100%; padding: 12px; margin-top: 15px;
            background: #333; color: #bb86fc; border: 1px solid #444;
            border-radius: 4px; cursor: pointer; font-weight: bold;
        }
        /* Gi·ªØ c√°c Class Badge c≈© c·ªßa b·∫°n */
        .badge { padding: 4px 8px; border-radius: 4px; font-size: 0.75rem; color: #fff; }
        .badge-mua { background: #4caf50; }
        .badge-ban { background: #f44336; }
        .badge-theo { background: #757575; }
    </style>
</head>
<body>
    <div class="container">
        <h1>VN30 - D·ª± b√°o Ch·ª©ng kho√°n b·∫±ng Thu·∫≠t to√°n AI</h1>
        
        <div class="info-bar">
            <p>üïí C·∫≠p nh·∫≠t: <span id="up-time">--</span></p>
            <p>üéØ D·ª± b√°o phi√™n: <b id="for-date">--</b></p>
            <p>‚è≥ L·∫ßn t·ªõi: <span id="next-up">--</span></p>
        </div>

        <table>
            <thead>
                <tr>
                    <th>M√£</th>
                    <th>Gi√°</th>
                    <th>+/- %</th>
                    <th class="hide-mobile">Kh·ªëi l∆∞·ª£ng</th>
                    <th>D·ª± b√°o</th>
                </tr>
            </thead>
            <tbody id="stock-list"></tbody>
        </table>
        <button id="btn-expand" onclick="showAll()">Xem th√™m to√†n b·ªô VN30</button>
    </div>

    <script>
        let fullData = [];
        let isFull = false;

        async function start() {
            const r = await fetch('data.json?v=' + Date.now());
            const d = await r.json();
            fullData = d.stocks;
            document.getElementById('up-time').innerText = d.update_time;
            document.getElementById('for-date').innerText = d.forecast_for;
            document.getElementById('next-up').innerText = d.next_update;
            render();
        }

        function render() {
            const body = document.getElementById('stock-list');
            const display = isFull ? fullData : fullData.slice(0, 10);
            body.innerHTML = display.map(s => `
                <tr>
                    <td><b>${s.s}</b></td>
                    <td>${s.p}</td>
                    <td class="${s.c >= 0 ? 'text-up' : 'text-down'}">${s.c}%</td>
                    <td class="hide-mobile">${(s.v/1e6).toFixed(1)}M</td>
                    <td><span class="badge badge-${s.f.toLowerCase().normalize('NFD').replace(/[\u0300-\u036f]/g, "").replace('ƒë','d').substring(0,3)}">${s.f}</span></td>
                </tr>
            `).join('');
            document.getElementById('btn-expand').style.display = isFull ? 'none' : 'block';
        }

        function showAll() { isFull = true; render(); }
        start();
    </script>
</body>
</html>
